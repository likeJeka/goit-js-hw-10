{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  inputEl: document.querySelector('#datetime-picker'),\n  startButton: document.querySelector('[data-start]'),\n  timerElements: document.querySelector('.timer'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nlet intervalId;\n\nrefs.startButton.disabled = true;\n\nfunction updateStartButtonAvailability(selectedDate) {\n  if (!selectedDate || selectedDate < new Date()) {\n    refs.startButton.disabled = true;\n  } else {\n    refs.startButton.disabled = false;\n  }\n}\n\nrefs.startButton.addEventListener('click', startCountdown);\n\nfunction startCountdown() {\n  const selectedDate = new Date(refs.inputEl.value);\n  if (!selectedDate || selectedDate < new Date()) {\n    alert('Please select a valid future date.');\n    return;\n  }\n\n  clearInterval(intervalId);\n\n  intervalId = setInterval(() => {\n    const currentTime = new Date();\n    const timeDifference = selectedDate - currentTime;\n\n    if (timeDifference <= 0) {\n      clearInterval(intervalId);\n      updateTimer(0, 0, 0, 0);\n      iziToast.show({\n        message: 'Finished',\n        color: 'green',\n      });\n      refs.startButton.disabled = true;\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(timeDifference);\n    updateTimer(days, hours, minutes, seconds);\n  }, 1000);\n\n  refs.startButton.disabled = true;\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n\n  const hours = Math.floor((ms % day) / hour);\n\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateTimer(days, hours, minutes, seconds) {\n  refs.days.textContent = String(days).padStart(2, '0');\n  refs.hours.textContent = String(hours).padStart(2, '0');\n  refs.minutes.textContent = String(minutes).padStart(2, '0');\n  refs.seconds.textContent = String(seconds).padStart(2, '0');\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    updateStartButtonAvailability(selectedDate);\n    if (selectedDate && selectedDate < new Date()) {\n      iziToast.show({\n        message: 'Please choose a day for a future :)',\n        color: 'red',\n      });\n    }\n  },\n};\nflatpickr('#datetime-picker', options);\n"],"names":["refs","intervalId","updateStartButtonAvailability","selectedDate","startCountdown","timeDifference","updateTimer","iziToast","days","hours","minutes","seconds","convertMs","ms","options","selectedDates","flatpickr"],"mappings":"iFAOA,MAAMA,EAAO,CACX,QAAS,SAAS,cAAc,kBAAkB,EAClD,YAAa,SAAS,cAAc,cAAc,EAClD,cAAe,SAAS,cAAc,QAAQ,EAC9C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEA,IAAIC,EAEJD,EAAK,YAAY,SAAW,GAE5B,SAASE,EAA8BC,EAAc,CAC/C,CAACA,GAAgBA,EAAe,IAAI,KACtCH,EAAK,YAAY,SAAW,GAE5BA,EAAK,YAAY,SAAW,EAEhC,CAEAA,EAAK,YAAY,iBAAiB,QAASI,CAAc,EAEzD,SAASA,GAAiB,CACxB,MAAMD,EAAe,IAAI,KAAKH,EAAK,QAAQ,KAAK,EAChD,GAAI,CAACG,GAAgBA,EAAe,IAAI,KAAQ,CAC9C,MAAM,oCAAoC,EAC1C,MACD,CAED,cAAcF,CAAU,EAExBA,EAAa,YAAY,IAAM,CAE7B,MAAMI,EAAiBF,EADH,IAAI,KAGxB,GAAIE,GAAkB,EAAG,CACvB,cAAcJ,CAAU,EACxBK,EAAY,EAAG,EAAG,EAAG,CAAC,EACtBC,EAAS,KAAK,CACZ,QAAS,WACT,MAAO,OACf,CAAO,EACDP,EAAK,YAAY,SAAW,GAC5B,MACD,CAED,KAAM,CAAE,KAAAQ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUP,CAAc,EAClEC,EAAYE,EAAMC,EAAOC,EAASC,CAAO,CAC1C,EAAE,GAAI,EAEPX,EAAK,YAAY,SAAW,EAC9B,CAEA,SAASY,EAAUC,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAE1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAYE,EAAMC,EAAOC,EAASC,EAAS,CAClDX,EAAK,KAAK,YAAc,OAAOQ,CAAI,EAAE,SAAS,EAAG,GAAG,EACpDR,EAAK,MAAM,YAAc,OAAOS,CAAK,EAAE,SAAS,EAAG,GAAG,EACtDT,EAAK,QAAQ,YAAc,OAAOU,CAAO,EAAE,SAAS,EAAG,GAAG,EAC1DV,EAAK,QAAQ,YAAc,OAAOW,CAAO,EAAE,SAAS,EAAG,GAAG,CAC5D,CAEA,MAAMG,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMZ,EAAeY,EAAc,CAAC,EACpCb,EAA8BC,CAAY,EACtCA,GAAgBA,EAAe,IAAI,MACrCI,EAAS,KAAK,CACZ,QAAS,sCACT,MAAO,KACf,CAAO,CAEJ,CACH,EACAS,EAAU,mBAAoBF,CAAO"}